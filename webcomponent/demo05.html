<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>抽象组件编写的基类</title>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="../observerMode/index.js"></script>
    <script>
        var TextCount = ComponentBase.extend({
            _getNum: function () {
                return this.get('input').val().length
            },
            bind: function () {
                var self = this
                this.get('input').on('keyup', function () {
                    self.notice('Text.input', self._getNum())
                    self.render()
                })
            },
            render: function () {
                var num = this._getNum();
                if ($('#J_input_count').length == 0) {
                    this.get('input').after('<span id="J_input_count"></span>');
                };

                $('#J_input_count').html(num + '个字');
            }
        })

        $(function () {
            var instance = new TextCount({ input: $("#J_input") })
            instance.on('Text.input', function (num) {
                if (num > 10) {
                    alert('超过了10个字了。。。')
                }
            })
        })
    </script>
</head>

<body>
    <input type="text" id="J_input" />
</body>

</html>